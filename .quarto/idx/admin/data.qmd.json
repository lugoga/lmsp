{"markdown":{"yaml":{"title":""},"containsRefs":false,"markdown":"\n\n```{=html}\n<script>\n// Data management system - tracking data collection progress\nlet dataItems = [\n  {\n    id: 1,\n    name: \"Fisheries Production Records\",\n    type: \"Non-Spatial (CSV)\",\n    source: \"Ministry of Fisheries\",\n    status: \"in-progress\",\n    progress: 65,\n    createdDate: \"2026-01-10\",\n    member: \"John Mwase\",\n    description: \"Annual fisheries production data including species catch volumes and economic value\",\n    file: null\n  },\n  {\n    id: 2,\n    name: \"Marine Protected Areas\",\n    type: \"Spatial (Shapefile)\",\n    source: \"Marine Conservation Commission\",\n    status: \"completed\",\n    progress: 100,\n    createdDate: \"2025-12-15\",\n    member: \"Sarah Banda\",\n    description: \"Spatial boundaries and regulations for protected marine zones\",\n    file: null\n  },\n  {\n    id: 3,\n    name: \"Community Survey Data\",\n    type: \"Non-Spatial (Excel)\",\n    source: \"Local Communities\",\n    status: \"not-started\",\n    progress: 0,\n    createdDate: \"2026-01-08\",\n    member: \"Peter Chimwanda\",\n    description: \"Community perception and socioeconomic survey responses\",\n    file: null\n  }\n];\n\n// Global file storage\nwindow.uploadedFiles = {};\n\n// Check authentication\nfunction checkAuth() {\n  return sessionStorage.getItem('lmsp_user') !== null;\n}\n\n// Initialize page\ndocument.addEventListener('DOMContentLoaded', function() {\n  const isAuth = checkAuth();\n  \n  if (!isAuth) {\n    document.getElementById('mainContent').innerHTML = '<div style=\"text-align: center; padding: 40px; color: #999;\"><p>Please log in to manage data.</p></div>';\n    return;\n  }\n  \n  renderDataList();\n  loadDataFromStorage();\n  setupFileUploadHandlers();\n});\n\n// Load data from localStorage\nfunction loadDataFromStorage() {\n  const saved = localStorage.getItem('lmsp_data_items');\n  if (saved) {\n    dataItems = JSON.parse(saved);\n    renderDataList();\n  }\n}\n\n// Save data to localStorage\nfunction saveDataItems() {\n  localStorage.setItem('lmsp_data_items', JSON.stringify(dataItems));\n}\n\n// Render data list\nfunction renderDataList() {\n  const container = document.getElementById('dataListContainer');\n  container.innerHTML = '';\n  \n  dataItems.forEach(item => {\n    const statusColor = item.status === 'completed' ? '#4caf50' : \n                       item.status === 'in-progress' ? '#ff9800' : '#ccc';\n    const statusText = item.status === 'completed' ? 'Completed' : \n                      item.status === 'in-progress' ? 'In Progress' : 'Not Started';\n    \n    const fileBadge = item.file && window.uploadedFiles[item.file] \n      ? `<span style=\"background: #2a5298; color: white; padding: 4px 10px; border-radius: 12px; font-size: 0.85em; font-weight: 600; margin-left: 10px;\">üìé ${window.uploadedFiles[item.file].name}</span>`\n      : '';\n    \n    const card = document.createElement('div');\n    card.className = 'data-card';\n    card.innerHTML = `\n      <div class=\"card-header\">\n        <div class=\"card-title\">\n          <h3>${item.name}</h3>\n          <p class=\"card-meta\">${item.type}  ${item.source}</p>\n        </div>\n        <button class=\"btn-edit\" onclick=\"openEditModal(${item.id})\"> Edit</button>\n      </div>\n      \n      <div class=\"card-body\">\n        <div class=\"member-info\">\n          <strong>Member:</strong> <span>${item.member || 'N/A'}</span>\n        </div>\n        <div class=\"description-info\">\n          <strong>Description:</strong> <span>${item.description || 'No description'}</span>\n        </div>\n        ${item.file && window.uploadedFiles[item.file] ? `\n        <div style=\"margin-top: 12px; padding: 10px; background: #e3f2fd; border-radius: 6px;\">\n          <strong style=\"color: #1976d2;\">üìé Attached File:</strong>\n          <div style=\"margin-top: 8px; display: flex; gap: 10px; flex-wrap: wrap;\">\n            <span style=\"color: #1e3c72; font-weight: 600;\">${window.uploadedFiles[item.file].name}</span>\n            <button type=\"button\" class=\"btn-view-file\" onclick=\"viewAttachedFile('${item.file}')\">View Data</button>\n          </div>\n        </div>\n        ` : ''}\n      </div>\n      \n      <div class=\"progress-section\">\n        <div class=\"progress-info\">\n          <span class=\"status-label\" style=\"background: ${statusColor};\">${statusText}</span>\n          <span class=\"progress-percent\">${item.progress}%</span>\n        </div>\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill\" style=\"width: ${item.progress}%; background: ${statusColor};\"></div>\n        </div>\n      </div>\n      \n      <div class=\"card-footer\">\n        <small>Created: ${item.createdDate}</small>\n        <button class=\"btn-delete\" onclick=\"deleteDataItem(${item.id})\"></button>\n      </div>\n    `;\n    container.appendChild(card);\n  });\n}\n\n// View attached file from data card\nfunction viewAttachedFile(fileId) {\n  if (!window.uploadedFiles[fileId]) {\n    alert('File not found');\n    return;\n  }\n  \n  window.currentFileData = window.uploadedFiles[fileId];\n  viewFileContent();\n}\n\n// Open edit modal\nfunction openEditModal(id) {\n  const item = dataItems.find(d => d.id === id);\n  if (!item) return;\n  \n  window.currentEditItem = item;\n  document.getElementById('modalTitle').textContent = 'Update Data: ' + item.name;\n  document.getElementById('editName').value = item.name;\n  document.getElementById('editType').value = item.type;\n  document.getElementById('editSource').value = item.source;\n  document.getElementById('editStatus').value = item.status;\n  document.getElementById('editProgress').value = item.progress;\n  document.getElementById('editMember').value = item.member || '';\n  document.getElementById('editDescription').value = item.description || '';\n  document.getElementById('progressValue').textContent = item.progress + '%';\n  \n  document.getElementById('editModal').style.display = 'block';\n}\n\n// Open new data form\nfunction openNewDataForm() {\n  window.currentEditItem = null;\n  window.currentFileData = null;\n  document.getElementById('modalTitle').textContent = 'Add New Data';\n  document.getElementById('editForm').reset();\n  document.getElementById('progressValue').textContent = '0%';\n  removeFileUpload();\n  document.getElementById('editModal').style.display = 'block';\n}\n\n// Update progress value display\nfunction updateProgressDisplay(value) {\n  document.getElementById('progressValue').textContent = value + '%';\n}\n\n// Save data item\nfunction saveDataItem() {\n  const name = document.getElementById('editName').value.trim();\n  const type = document.getElementById('editType').value.trim();\n  const source = document.getElementById('editSource').value.trim();\n  const status = document.getElementById('editStatus').value;\n  const progress = parseInt(document.getElementById('editProgress').value);\n  const member = document.getElementById('editMember').value.trim();\n  const description = document.getElementById('editDescription').value.trim();\n  \n  if (!name || !type || !source || !member || !description) {\n    alert('Please fill in all required fields');\n    return;\n  }\n  \n  if (window.currentEditItem) {\n    // Update existing\n    window.currentEditItem.name = name;\n    window.currentEditItem.type = type;\n    window.currentEditItem.source = source;\n    window.currentEditItem.status = status;\n    window.currentEditItem.progress = progress;\n    window.currentEditItem.member = member;\n    window.currentEditItem.description = description;\n    \n    // Add file if uploaded\n    if (window.currentFileData) {\n      const fileId = 'file_' + window.currentEditItem.id + '_' + Date.now();\n      window.uploadedFiles[fileId] = window.currentFileData;\n      window.currentEditItem.file = fileId;\n    }\n    \n    showMessage('Data updated successfully!', 'success');\n  } else {\n    // Create new\n    const newId = Math.max(...dataItems.map(d => d.id), 0) + 1;\n    const today = new Date().toISOString().split('T')[0];\n    \n    let fileRef = null;\n    if (window.currentFileData) {\n      const fileId = 'file_' + newId + '_' + Date.now();\n      window.uploadedFiles[fileId] = window.currentFileData;\n      fileRef = fileId;\n    }\n    \n    dataItems.push({\n      id: newId,\n      name,\n      type,\n      source,\n      status,\n      progress,\n      member,\n      description,\n      createdDate: today,\n      file: fileRef\n    });\n    showMessage('Data added successfully!', 'success');\n  }\n  \n  saveDataItems();\n  closeModal();\n  renderDataList();\n}\n\n// Delete data item\nfunction deleteDataItem(id) {\n  if (confirm('Delete this data item permanently?')) {\n    dataItems = dataItems.filter(d => d.id !== id);\n    saveDataItems();\n    renderDataList();\n    showMessage('Data deleted!', 'success');\n  }\n}\n\n// Modal functions\nfunction closeModal() {\n  document.getElementById('editModal').style.display = 'none';\n  window.currentEditItem = null;\n  window.currentFileData = null;\n  removeFileUpload();\n}\n\nfunction showMessage(msg, type) {\n  const div = document.createElement('div');\n  div.className = `message ${type}`;\n  div.textContent = msg;\n  document.body.appendChild(div);\n  setTimeout(() => div.remove(), 3000);\n}\n\n// Close modal on outside click\nwindow.onclick = function(e) {\n  const modal = document.getElementById('editModal');\n  if (e.target === modal) closeModal();\n}\n\n// File Upload Handlers\nfunction setupFileUploadHandlers() {\n  const fileUploadArea = document.getElementById('fileUploadArea');\n  const fileInput = document.getElementById('fileUpload');\n  \n  if (!fileUploadArea || !fileInput) return;\n  \n  // Click to upload\n  fileUploadArea.addEventListener('click', () => fileInput.click());\n  \n  // Drag and drop\n  fileUploadArea.addEventListener('dragover', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    fileUploadArea.classList.add('drag-over');\n  });\n  \n  fileUploadArea.addEventListener('dragleave', () => {\n    fileUploadArea.classList.remove('drag-over');\n  });\n  \n  fileUploadArea.addEventListener('drop', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    fileUploadArea.classList.remove('drag-over');\n    \n    const files = e.dataTransfer.files;\n    if (files.length > 0) {\n      handleFileUpload(files[0]);\n    }\n  });\n  \n  // File input change\n  fileInput.addEventListener('change', (e) => {\n    if (e.target.files.length > 0) {\n      handleFileUpload(e.target.files[0]);\n    }\n  });\n}\n\nfunction handleFileUpload(file) {\n  const validTypes = ['text/csv', 'application/json', 'application/octet-stream', 'image/tiff'];\n  const validExtensions = ['.csv', '.json', '.geojson', '.gpkg', '.tif', '.tiff'];\n  \n  const fileExtension = '.' + file.name.split('.').pop().toLowerCase();\n  \n  if (!validExtensions.includes(fileExtension)) {\n    alert('Invalid file type. Please upload CSV, GeoJSON, Geopackage (GPKG), or TIFF files.');\n    return;\n  }\n  \n  const reader = new FileReader();\n  \n  reader.onload = (e) => {\n    try {\n      const isBinary = fileExtension === '.gpkg' || fileExtension === '.tif' || fileExtension === '.tiff';\n      const fileData = {\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        extension: fileExtension,\n        content: isBinary ? null : e.target.result,\n        uploadDate: new Date().toLocaleString(),\n        isBinary: isBinary,\n        file: file\n      };\n      \n      // Store file data\n      window.currentFileData = fileData;\n      \n      // Display preview\n      displayFilePreview(fileData);\n    } catch (error) {\n      alert('Error reading file: ' + error.message);\n    }\n  };\n  \n  reader.onerror = () => {\n    alert('Error reading file');\n  };\n  \n  // Read as text for text-based files, as binary for raster/database files\n  if (fileExtension === '.gpkg' || fileExtension === '.tif' || fileExtension === '.tiff') {\n    reader.readAsArrayBuffer(file);\n  } else {\n    reader.readAsText(file);\n  }\n}\n\nfunction displayFilePreview(fileData) {\n  const previewContainer = document.getElementById('filePreviewContainer');\n  const fileSize = fileData.size > 1048576 ? (fileData.size / 1048576).toFixed(2) + ' MB' : (fileData.size / 1024).toFixed(2) + ' KB'; // KB or MB\n  \n  let statsHtml = '';\n  if (fileData.extension === '.csv') {\n    const lines = fileData.content.split('\\n');\n    const rowCount = lines.filter(line => line.trim()).length - 1; // Subtract header\n    statsHtml = `\n      <div class=\"file-preview-stat\">\n        <strong>Rows:</strong>\n        <span>${rowCount}</span>\n      </div>\n      <div class=\"file-preview-stat\">\n        <strong>Size:</strong>\n        <span>${fileSize}</span>\n      </div>\n    `;\n  } else if (fileData.extension === '.json' || fileData.extension === '.geojson') {\n    const json = JSON.parse(fileData.content);\n    const itemCount = Array.isArray(json) ? json.length : (json.features ? json.features.length : 1);\n    statsHtml = `\n      <div class=\"file-preview-stat\">\n        <strong>Features:</strong>\n        <span>${itemCount}</span>\n      </div>\n      <div class=\"file-preview-stat\">\n        <strong>Size:</strong>\n        <span>${fileSize}</span>\n      </div>\n    `;\n  } else if (fileData.extension === '.gpkg') {\n    statsHtml = `\n      <div class=\"file-preview-stat\">\n        <strong>Type:</strong>\n        <span>Geopackage Database</span>\n      </div>\n      <div class=\"file-preview-stat\">\n        <strong>Size:</strong>\n        <span>${fileSize}</span>\n      </div>\n    `;\n  } else if (fileData.extension === '.tif' || fileData.extension === '.tiff') {\n    statsHtml = `\n      <div class=\"file-preview-stat\">\n        <strong>Type:</strong>\n        <span>Raster Image (GeoTIFF)</span>\n      </div>\n      <div class=\"file-preview-stat\">\n        <strong>Size:</strong>\n        <span>${fileSize}</span>\n      </div>\n    `;\n  }\n  \n  previewContainer.innerHTML = `\n    <div class=\"file-preview\">\n      <div class=\"file-preview-info\">\n        <div class=\"file-preview-name\">üìÑ ${escapeHtml(fileData.name)}</div>\n        <div class=\"file-preview-stats\">\n          ${statsHtml}\n        </div>\n      </div>\n      <div class=\"file-preview-actions\">\n        <button type=\"button\" class=\"btn-view-file\" onclick=\"viewFileContent()\">üëÅÔ∏è View</button>\n        <button type=\"button\" class=\"btn-remove-file\" onclick=\"removeFileUpload()\">üóëÔ∏è Remove</button>\n      </div>\n    </div>\n  `;\n  \n  previewContainer.style.display = 'block';\n}\n\nfunction viewFileContent() {\n  if (!window.currentFileData) return;\n  \n  const fileData = window.currentFileData;\n  \n  // Handle binary files\n  if (fileData.isBinary) {\n    if (fileData.extension === '.gpkg') {\n      alert('üóÇÔ∏è Geopackage Database\\n\\nFile: ' + fileData.name + '\\n\\nSize: ' + (fileData.size / 1024).toFixed(2) + ' KB\\n\\nNote: Geopackage files contain vector and/or raster data stored in a SQLite database. To view the contents, use specialized GIS software like QGIS, ArcGIS, or similar tools.');\n    } else if (fileData.extension === '.tif' || fileData.extension === '.tiff') {\n      alert('üñºÔ∏è GeoTIFF Raster Image\\n\\nFile: ' + fileData.name + '\\n\\nSize: ' + (fileData.size / 1024).toFixed(2) + ' KB\\n\\nNote: This is a geospatial raster image. To visualize it, use GIS software like QGIS, ArcGIS, GDAL, or web-based viewers that support GeoTIFF format.');\n    }\n    return;\n  }\n  \n  const overlay = document.createElement('div');\n  overlay.style.position = 'fixed';\n  overlay.style.top = '0';\n  overlay.style.left = '0';\n  overlay.style.width = '100%';\n  overlay.style.height = '100%';\n  overlay.style.background = 'rgba(0,0,0,0.6)';\n  overlay.style.zIndex = '2999';\n  overlay.style.display = 'flex';\n  overlay.style.alignItems = 'center';\n  overlay.style.justifyContent = 'center';\n  overlay.style.backdropFilter = 'blur(2px)';\n  overlay.id = 'fileViewerOverlay';\n  \n  let contentHtml = '';\n  \n  if (fileData.extension === '.csv') {\n    const lines = fileData.content.split('\\n');\n    const headers = lines[0].split(',').map(h => h.trim());\n    \n    contentHtml = `\n      <div class=\"file-viewer-modal\">\n        <button class=\"close-btn\" onclick=\"closeFileViewer()\">&times;</button>\n        <h3>üìÑ ${escapeHtml(fileData.name)}</h3>\n        <div class=\"file-table-container\">\n          <table>\n            <thead>\n              <tr>\n                ${headers.map(h => `<th>${escapeHtml(h)}</th>`).join('')}\n              </tr>\n            </thead>\n            <tbody>\n              ${lines.slice(1, 20).map(line => {\n                if (!line.trim()) return '';\n                const cells = line.split(',').map(c => c.trim());\n                return `<tr>${cells.map(c => `<td>${escapeHtml(c)}</td>`).join('')}</tr>`;\n              }).join('')}\n            </tbody>\n          </table>\n        </div>\n        ${lines.length > 21 ? `<p style=\"text-align: center; color: #999; margin-top: 15px;\">Showing first 19 rows of ${lines.length - 1} total rows</p>` : ''}\n      </div>\n    `;\n  } else if (fileData.extension === '.json' || fileData.extension === '.geojson') {\n    try {\n      const json = JSON.parse(fileData.content);\n      const prettyJson = JSON.stringify(json, null, 2).substring(0, 3000);\n      \n      contentHtml = `\n        <div class=\"file-viewer-modal\">\n          <button class=\"close-btn\" onclick=\"closeFileViewer()\">&times;</button>\n          <h3>üìã ${escapeHtml(fileData.name)}</h3>\n          <div class=\"json-viewer\">${escapeHtml(prettyJson)}</div>\n          ${JSON.stringify(json).length > 3000 ? '<p style=\"color: #999; margin-top: 10px;\">... (truncated)</p>' : ''}\n        </div>\n      `;\n    } catch {\n      contentHtml = `\n        <div class=\"file-viewer-modal\">\n          <button class=\"close-btn\" onclick=\"closeFileViewer()\">&times;</button>\n          <h3>üìã ${escapeHtml(fileData.name)}</h3>\n          <p>Error parsing JSON file</p>\n        </div>\n      `;\n    }\n  }\n  \n  overlay.innerHTML = contentHtml;\n  document.body.appendChild(overlay);\n  \n  // Close on overlay click\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) closeFileViewer();\n  });\n}\n\nfunction closeFileViewer() {\n  const overlay = document.getElementById('fileViewerOverlay');\n  if (overlay) overlay.remove();\n}\n\nfunction removeFileUpload() {\n  window.currentFileData = null;\n  document.getElementById('fileUpload').value = '';\n  document.getElementById('filePreviewContainer').style.display = 'none';\n  document.getElementById('filePreviewContainer').innerHTML = '';\n}\n\nfunction escapeHtml(text) {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n</script>\n\n<style>\n.data-container {\n  max-width: 1400px;\n  margin: 0 auto;\n  padding: 30px 20px;\n  background: linear-gradient(135deg, #f8f9fa 0%, #f0f4f8 100%);\n  min-height: 100vh;\n}\n\n.header-section {\n  margin-bottom: 40px;\n  background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);\n  color: white;\n  padding: 40px;\n  border-radius: 12px;\n  box-shadow: 0 8px 24px rgba(30, 60, 114, 0.15);\n}\n\n.header-section h1 {\n  color: white;\n  margin: 0 0 10px 0;\n  font-size: 2em;\n  font-weight: 700;\n  border: none;\n}\n\n.header-section p {\n  color: rgba(255,255,255,0.9);\n  margin: 5px 0 25px 0;\n  font-size: 1.05em;\n}\n\n.btn-add {\n  background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);\n  color: white;\n  padding: 14px 28px;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 700;\n  font-size: 1.05em;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.25);\n  display: inline-block;\n}\n\n.btn-add:hover {\n  background: linear-gradient(135deg, #45a049 0%, #3d8b40 100%);\n  transform: translateY(-3px);\n  box-shadow: 0 6px 18px rgba(76, 175, 80, 0.35);\n}\n\n.category-section {\n  margin-bottom: 50px;\n}\n\n.category-title {\n  color: white;\n  font-size: 1.5em;\n  margin: 0 0 25px 0;\n  padding: 20px 30px;\n  background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);\n  border-radius: 10px;\n  box-shadow: 0 6px 18px rgba(30, 60, 114, 0.2);\n  font-weight: 700;\n  letter-spacing: 0.5px;\n}\n\n.category-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(480px, 1fr));\n  gap: 25px;\n  margin-top: 20px;\n}\n\n.data-card {\n  background: white;\n  border: 2px solid #e0e0e0;\n  border-radius: 12px;\n  padding: 25px;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.08);\n  transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n}\n\n.data-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, #2a5298 0%, #4caf50 100%);\n}\n\n.data-card:hover {\n  box-shadow: 0 12px 28px rgba(0,0,0,0.15);\n  transform: translateY(-8px);\n  border-color: #2a5298;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 20px;\n  gap: 15px;\n  padding-bottom: 15px;\n  border-bottom: 2px solid #f0f0f0;\n}\n\n.card-title h3 {\n  margin: 0 0 8px 0;\n  color: #1e3c72;\n  font-size: 1.2em;\n  font-weight: 700;\n  line-height: 1.3;\n}\n\n.card-meta {\n  margin: 0;\n  color: #999;\n  font-size: 0.95em;\n  font-weight: 500;\n}\n\n.card-body {\n  margin-bottom: 20px;\n  padding: 16px;\n  background: #f9f9f9;\n  border-radius: 8px;\n  font-size: 0.95em;\n  line-height: 1.6;\n}\n\n.member-info,\n.description-info {\n  margin-bottom: 12px;\n}\n\n.member-info:last-child,\n.description-info:last-child {\n  margin-bottom: 0;\n}\n\n.member-info strong,\n.description-info strong {\n  color: #1e3c72;\n  font-weight: 700;\n  display: block;\n  margin-bottom: 4px;\n}\n\n.member-info span,\n.description-info span {\n  color: #555;\n  word-wrap: break-word;\n}\n\n.btn-edit {\n  background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);\n  color: white;\n  padding: 10px 18px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 700;\n  font-size: 0.95em;\n  white-space: nowrap;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 8px rgba(42, 82, 152, 0.2);\n}\n\n.btn-edit:hover {\n  background: linear-gradient(135deg, #1e3c72 0%, #142845 100%);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(42, 82, 152, 0.3);\n}\n\n.btn-edit:active {\n  transform: translateY(0);\n}\n\n.progress-section {\n  margin-bottom: 20px;\n  padding: 20px;\n  background: #f9f9f9;\n  border-radius: 8px;\n}\n\n.progress-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n  gap: 15px;\n}\n\n.status-label {\n  padding: 6px 16px;\n  border-radius: 20px;\n  color: white;\n  font-weight: 700;\n  font-size: 0.9em;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.15);\n}\n\n.progress-percent {\n  font-weight: 700;\n  color: #1e3c72;\n  font-size: 1.3em;\n  min-width: 50px;\n  text-align: right;\n}\n\n.progress-bar {\n  width: 100%;\n  height: 12px;\n  background: #e0e0e0;\n  border-radius: 6px;\n  overflow: hidden;\n  position: relative;\n}\n\n.progress-fill {\n  height: 100%;\n  transition: width 0.4s ease;\n  background: linear-gradient(90deg, #2a5298 0%, #4caf50 100%);\n  box-shadow: 0 0 8px rgba(42, 82, 152, 0.4);\n}\n\n.card-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 15px;\n  border-top: 2px solid #f0f0f0;\n  color: #999;\n  font-size: 0.9em;\n  font-weight: 500;\n}\n\n.btn-delete {\n  background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);\n  color: white;\n  padding: 8px 14px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 700;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 6px rgba(244, 67, 54, 0.2);\n}\n\n.btn-delete:hover {\n  background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);\n}\n\n/* Modal Styles */\n.modal {\n  display: none;\n  position: fixed;\n  z-index: 2000;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.6);\n  backdrop-filter: blur(2px);\n  animation: fadeIn 0.3s ease;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n.modal-content {\n  background-color: white;\n  margin: 5% auto;\n  padding: 40px;\n  width: 90%;\n  max-width: 650px;\n  border-radius: 14px;\n  box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n  animation: slideUp 0.3s ease;\n}\n\n@keyframes slideUp {\n  from {\n    transform: translateY(50px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n  border-bottom: 3px solid #2a5298;\n  padding-bottom: 20px;\n}\n\n.modal-header h2 {\n  margin: 0;\n  color: #1e3c72;\n  font-size: 1.4em;\n  font-weight: 700;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 32px;\n  font-weight: bold;\n  color: #999;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n}\n\n.close-btn:hover {\n  background: #f0f0f0;\n  color: #1e3c72;\n}\n\n.form-group {\n  margin-bottom: 24px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 10px;\n  font-weight: 700;\n  color: #1e3c72;\n  font-size: 0.95em;\n  text-transform: uppercase;\n  letter-spacing: 0.3px;\n}\n\n.form-group input,\n.form-group select {\n  width: 100%;\n  padding: 14px;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px;\n  font-size: 1em;\n  font-family: inherit;\n  transition: all 0.3s ease;\n}\n\n.form-group input:focus,\n.form-group select:focus {\n  outline: none;\n  border-color: #2a5298;\n  box-shadow: 0 0 12px rgba(42, 82, 152, 0.2);\n  background: #f8f9ff;\n}\n\n.form-group textarea {\n  width: 100%;\n  padding: 14px;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px;\n  font-size: 1em;\n  font-family: inherit;\n  transition: all 0.3s ease;\n}\n\n.form-group textarea:focus {\n  outline: none;\n  border-color: #2a5298;\n  box-shadow: 0 0 12px rgba(42, 82, 152, 0.2);\n  background: #f8f9ff;\n}\n\n.progress-input-group {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  margin-bottom: 24px;\n}\n\n.progress-input-group input[type=\"range\"] {\n  flex: 1;\n}\n\n#progressValue {\n  min-width: 70px;\n  font-size: 1.3em;\n  font-weight: 700;\n  color: #2a5298;\n  text-align: right;\n}\n\n.form-buttons {\n  display: flex;\n  gap: 15px;\n  justify-content: flex-end;\n  margin-top: 35px;\n  padding-top: 25px;\n  border-top: 2px solid #f0f0f0;\n}\n\n.btn-save {\n  background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);\n  color: white;\n  padding: 14px 32px;\n  border: none;\n  border-radius: 8px;\n  font-size: 1em;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);\n}\n\n.btn-save:hover {\n  box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);\n  transform: translateY(-2px);\n}\n\n.btn-save:active {\n  transform: translateY(0);\n}\n\n.btn-cancel {\n  background: #e8e8e8;\n  color: #333;\n  padding: 14px 32px;\n  border: none;\n  border-radius: 8px;\n  font-size: 1em;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);\n}\n\n.btn-cancel:hover {\n  background: #d8d8d8;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.12);\n  transform: translateY(-2px);\n}\n\n.btn-cancel:active {\n  transform: translateY(0);\n}\n\n.message {\n  position: fixed;\n  top: 25px;\n  right: 25px;\n  padding: 16px 24px;\n  background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);\n  color: white;\n  border-radius: 10px;\n  font-weight: 700;\n  font-size: 0.95em;\n  box-shadow: 0 6px 20px rgba(76, 175, 80, 0.35);\n  border-left: 4px solid #2e7d32;\n  animation: slideInRight 0.4s ease;\n  z-index: 2000;\n}\n\n.message.success {\n  background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);\n  color: white;\n}\n\n.message.error {\n  background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);\n  color: white;\n  border-left-color: #c62828;\n}\n\n@keyframes slideInRight {\n  from {\n    transform: translateX(400px);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n/* File Upload Styles */\n.file-upload-area {\n  border: 3px dashed #2a5298;\n  border-radius: 10px;\n  padding: 30px;\n  background: linear-gradient(135deg, #f8f9ff 0%, #f0f4f8 100%);\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n}\n\n.file-upload-area:hover {\n  border-color: #4caf50;\n  background: linear-gradient(135deg, #f0f8f5 0%, #e8f5f1 100%);\n  transform: scale(1.02);\n}\n\n.file-upload-area.drag-over {\n  border-color: #4caf50;\n  background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.2);\n}\n\n.file-upload-placeholder {\n  pointer-events: none;\n}\n\n.upload-icon {\n  font-size: 2.5em;\n  display: block;\n  margin-bottom: 10px;\n}\n\n.file-upload-placeholder p {\n  margin: 10px 0;\n  color: #2a5298;\n  font-weight: 600;\n  font-size: 1em;\n}\n\n.file-upload-placeholder small {\n  display: block;\n  color: #666;\n  font-size: 0.9em;\n  margin-top: 5px;\n}\n\n.file-preview {\n  background: white;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px;\n  padding: 15px;\n  margin-top: 10px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 15px;\n}\n\n.file-preview-info {\n  flex: 1;\n  text-align: left;\n}\n\n.file-preview-name {\n  font-weight: 700;\n  color: #1e3c72;\n  margin-bottom: 5px;\n  word-break: break-word;\n}\n\n.file-preview-stats {\n  font-size: 0.9em;\n  color: #666;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 10px;\n  margin-top: 8px;\n}\n\n.file-preview-stat {\n  display: flex;\n  justify-content: space-between;\n}\n\n.file-preview-stat strong {\n  color: #2a5298;\n  margin-right: 5px;\n}\n\n.file-preview-actions {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.btn-view-file {\n  background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);\n  color: white;\n  padding: 8px 14px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 0.9em;\n  white-space: nowrap;\n  transition: all 0.3s ease;\n}\n\n.btn-view-file:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(42, 82, 152, 0.3);\n}\n\n.btn-remove-file {\n  background: #f44336;\n  color: white;\n  padding: 8px 14px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 0.9em;\n  transition: all 0.3s ease;\n}\n\n.btn-remove-file:hover {\n  background: #d32f2f;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);\n}\n\n/* File Viewer Modal */\n.file-viewer-modal {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: white;\n  border-radius: 12px;\n  max-width: 90vw;\n  max-height: 80vh;\n  overflow: auto;\n  z-index: 3000;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  padding: 30px;\n}\n\n.file-viewer-modal h3 {\n  margin-top: 0;\n  color: #1e3c72;\n  border-bottom: 2px solid #f0f0f0;\n  padding-bottom: 15px;\n}\n\n.file-viewer-modal .close-btn {\n  position: absolute;\n  top: 15px;\n  right: 15px;\n}\n\n.file-table-container {\n  overflow-x: auto;\n  margin-top: 15px;\n}\n\n.file-table-container table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.95em;\n}\n\n.file-table-container th {\n  background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);\n  color: white;\n  padding: 12px;\n  text-align: left;\n  font-weight: 700;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n}\n\n.file-table-container td {\n  padding: 10px 12px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.file-table-container tr:hover {\n  background: #f9f9f9;\n}\n\n.json-viewer {\n  background: #f5f5f5;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  padding: 15px;\n  font-family: monospace;\n  font-size: 0.9em;\n  overflow-x: auto;\n  max-height: 500px;\n}\n\n.json-key {\n  color: #2a5298;\n  font-weight: 600;\n}\n\n.json-string {\n  color: #4caf50;\n}\n\n.json-number {\n  color: #f44336;\n}\n\n@media (max-width: 768px) {\n  .file-upload-area {\n    padding: 20px;\n  }\n  \n  .file-preview {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  \n  .file-preview-actions {\n    width: 100%;\n  }\n  \n  .btn-view-file,\n  .btn-remove-file {\n    flex: 1;\n  }\n  \n  .file-viewer-modal {\n    max-width: 95vw;\n    max-height: 85vh;\n    padding: 20px;\n  }\n}\n\n@media (max-width: 1024px) {\n  .data-container {\n    padding: 24px;\n  }\n  \n  .category-grid {\n    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));\n  }\n}\n\n@media (max-width: 768px) {\n  .data-container {\n    padding: 16px;\n  }\n  \n  .header-section {\n    padding: 24px 16px;\n  }\n  \n  .header-section h1 {\n    font-size: 1.6em;\n  }\n  \n  .category-grid {\n    grid-template-columns: 1fr;\n    gap: 16px;\n  }\n  \n  .data-card {\n    padding: 18px;\n  }\n  \n  .card-title h3 {\n    font-size: 1.1em;\n  }\n  \n  .form-buttons {\n    flex-direction: column;\n    gap: 12px;\n  }\n  \n  .btn-save,\n  .btn-cancel {\n    width: 100%;\n  }\n  \n  .modal-content {\n    padding: 24px 16px;\n    margin: 50px 20px;\n  }\n  \n  .message {\n    top: 15px;\n    right: 15px;\n    padding: 14px 16px;\n    font-size: 0.9em;\n  }\n}\n</style>\n\n<div class=\"data-container\">\n  <div class=\"header-section\">\n    <h1> Data Management</h1>\n    <p>Track and manage data collection progress for LMSP-Tanzania initiatives</p>\n    <button class=\"btn-add\" onclick=\"openNewDataForm()\"> Add New Data</button>\n  </div>\n  \n  <div id=\"mainContent\">\n    <div class=\"data-grid\" id=\"dataListContainer\"></div>\n  </div>\n</div>\n\n<div id=\"editModal\" class=\"modal\">\n  <div class=\"modal-content\">\n    <div class=\"modal-header\">\n      <h2 id=\"modalTitle\">Add New Data</h2>\n      <button class=\"close-btn\" onclick=\"closeModal()\">&times;</button>\n    </div>\n    \n    <form id=\"editForm\" onsubmit=\"event.preventDefault(); saveDataItem();\">\n      <div class=\"form-group\">\n        <label for=\"editName\">Data Name: <span style=\"color: red;\">*</span></label>\n        <input type=\"text\" id=\"editName\" required placeholder=\"e.g., Fisheries Production Records\">\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editType\">Data Type: <span style=\"color: red;\">*</span></label>\n        <select id=\"editType\" required>\n          <option value=\"\">Select Type</option>\n          <option value=\"Non-Spatial (CSV)\">Non-Spatial (CSV)</option>\n          <option value=\"Non-Spatial (Excel)\">Non-Spatial (Excel)</option>\n          <option value=\"Non-Spatial (JSON)\">Non-Spatial (JSON)</option>\n          <option value=\"Spatial (Shapefile)\">Spatial (Shapefile)</option>\n          <option value=\"Spatial (GeoJSON)\">Spatial (GeoJSON)</option>\n          <option value=\"Spatial (Raster)\">Spatial (Raster)</option>\n        </select>\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editSource\">Data Source: <span style=\"color: red;\">*</span></label>\n        <input type=\"text\" id=\"editSource\" required placeholder=\"e.g., Ministry of Fisheries\">\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editMember\">Member Added: <span style=\"color: red;\">*</span></label>\n        <input type=\"text\" id=\"editMember\" required placeholder=\"e.g., John Mwase\">\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editDescription\">Description: <span style=\"color: red;\">*</span></label>\n        <textarea id=\"editDescription\" required placeholder=\"e.g., Annual fisheries production data including species catch volumes...\" style=\"resize: vertical; min-height: 80px;\"></textarea>\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editCategory\">Category: <span style=\"color: red;\">*</span></label>\n        <select id=\"editCategory\" required>\n          <option value=\"\">Select Category</option>\n          <option value=\"Administrative/Physical\">Administrative/Physical</option>\n          <option value=\"Biological\">Biological</option>\n          <option value=\"Human Use\">Human Use</option>\n        </select>\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editStatus\">Status: <span style=\"color: red;\">*</span></label>\n        <select id=\"editStatus\" required>\n          <option value=\"not-started\">Not Started</option>\n          <option value=\"in-progress\">In Progress</option>\n          <option value=\"completed\">Completed</option>\n        </select>\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editProgress\">Progress: <span style=\"color: red;\">*</span></label>\n        <div class=\"progress-input-group\">\n          <input type=\"range\" id=\"editProgress\" min=\"0\" max=\"100\" value=\"0\" \n                 onchange=\"updateProgressDisplay(this.value)\" \n                 oninput=\"updateProgressDisplay(this.value)\">\n          <span id=\"progressValue\">0%</span>\n        </div>\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"fileUpload\">Upload File (CSV, GeoJSON, GPKG, TIFF): <span style=\"color: red;\">*</span></label>\n        <div class=\"file-upload-area\" id=\"fileUploadArea\">\n          <input type=\"file\" id=\"fileUpload\" accept=\".csv,.json,.geojson,.gpkg,.tif,.tiff\" style=\"display: none;\">\n          <div class=\"file-upload-placeholder\">\n            <span class=\"upload-icon\">üìÅ</span>\n            <p>Drag & drop your file here or click to browse</p>\n            <small>Supported: CSV, GeoJSON, Geopackage (GPKG), TIFF</small>\n          </div>\n          <div id=\"filePreviewContainer\" style=\"display: none; margin-top: 15px;\"></div>\n        </div>\n      </div>\n      \n      <div class=\"form-buttons\">\n        <button type=\"button\" class=\"btn-cancel\" onclick=\"closeModal()\">Cancel</button>\n        <button type=\"submit\" class=\"btn-save\"> Save Data</button>\n      </div>\n    </form>\n  </div>\n</div>\n```\n","srcMarkdownNoYaml":"\n\n```{=html}\n<script>\n// Data management system - tracking data collection progress\nlet dataItems = [\n  {\n    id: 1,\n    name: \"Fisheries Production Records\",\n    type: \"Non-Spatial (CSV)\",\n    source: \"Ministry of Fisheries\",\n    status: \"in-progress\",\n    progress: 65,\n    createdDate: \"2026-01-10\",\n    member: \"John Mwase\",\n    description: \"Annual fisheries production data including species catch volumes and economic value\",\n    file: null\n  },\n  {\n    id: 2,\n    name: \"Marine Protected Areas\",\n    type: \"Spatial (Shapefile)\",\n    source: \"Marine Conservation Commission\",\n    status: \"completed\",\n    progress: 100,\n    createdDate: \"2025-12-15\",\n    member: \"Sarah Banda\",\n    description: \"Spatial boundaries and regulations for protected marine zones\",\n    file: null\n  },\n  {\n    id: 3,\n    name: \"Community Survey Data\",\n    type: \"Non-Spatial (Excel)\",\n    source: \"Local Communities\",\n    status: \"not-started\",\n    progress: 0,\n    createdDate: \"2026-01-08\",\n    member: \"Peter Chimwanda\",\n    description: \"Community perception and socioeconomic survey responses\",\n    file: null\n  }\n];\n\n// Global file storage\nwindow.uploadedFiles = {};\n\n// Check authentication\nfunction checkAuth() {\n  return sessionStorage.getItem('lmsp_user') !== null;\n}\n\n// Initialize page\ndocument.addEventListener('DOMContentLoaded', function() {\n  const isAuth = checkAuth();\n  \n  if (!isAuth) {\n    document.getElementById('mainContent').innerHTML = '<div style=\"text-align: center; padding: 40px; color: #999;\"><p>Please log in to manage data.</p></div>';\n    return;\n  }\n  \n  renderDataList();\n  loadDataFromStorage();\n  setupFileUploadHandlers();\n});\n\n// Load data from localStorage\nfunction loadDataFromStorage() {\n  const saved = localStorage.getItem('lmsp_data_items');\n  if (saved) {\n    dataItems = JSON.parse(saved);\n    renderDataList();\n  }\n}\n\n// Save data to localStorage\nfunction saveDataItems() {\n  localStorage.setItem('lmsp_data_items', JSON.stringify(dataItems));\n}\n\n// Render data list\nfunction renderDataList() {\n  const container = document.getElementById('dataListContainer');\n  container.innerHTML = '';\n  \n  dataItems.forEach(item => {\n    const statusColor = item.status === 'completed' ? '#4caf50' : \n                       item.status === 'in-progress' ? '#ff9800' : '#ccc';\n    const statusText = item.status === 'completed' ? 'Completed' : \n                      item.status === 'in-progress' ? 'In Progress' : 'Not Started';\n    \n    const fileBadge = item.file && window.uploadedFiles[item.file] \n      ? `<span style=\"background: #2a5298; color: white; padding: 4px 10px; border-radius: 12px; font-size: 0.85em; font-weight: 600; margin-left: 10px;\">üìé ${window.uploadedFiles[item.file].name}</span>`\n      : '';\n    \n    const card = document.createElement('div');\n    card.className = 'data-card';\n    card.innerHTML = `\n      <div class=\"card-header\">\n        <div class=\"card-title\">\n          <h3>${item.name}</h3>\n          <p class=\"card-meta\">${item.type}  ${item.source}</p>\n        </div>\n        <button class=\"btn-edit\" onclick=\"openEditModal(${item.id})\"> Edit</button>\n      </div>\n      \n      <div class=\"card-body\">\n        <div class=\"member-info\">\n          <strong>Member:</strong> <span>${item.member || 'N/A'}</span>\n        </div>\n        <div class=\"description-info\">\n          <strong>Description:</strong> <span>${item.description || 'No description'}</span>\n        </div>\n        ${item.file && window.uploadedFiles[item.file] ? `\n        <div style=\"margin-top: 12px; padding: 10px; background: #e3f2fd; border-radius: 6px;\">\n          <strong style=\"color: #1976d2;\">üìé Attached File:</strong>\n          <div style=\"margin-top: 8px; display: flex; gap: 10px; flex-wrap: wrap;\">\n            <span style=\"color: #1e3c72; font-weight: 600;\">${window.uploadedFiles[item.file].name}</span>\n            <button type=\"button\" class=\"btn-view-file\" onclick=\"viewAttachedFile('${item.file}')\">View Data</button>\n          </div>\n        </div>\n        ` : ''}\n      </div>\n      \n      <div class=\"progress-section\">\n        <div class=\"progress-info\">\n          <span class=\"status-label\" style=\"background: ${statusColor};\">${statusText}</span>\n          <span class=\"progress-percent\">${item.progress}%</span>\n        </div>\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill\" style=\"width: ${item.progress}%; background: ${statusColor};\"></div>\n        </div>\n      </div>\n      \n      <div class=\"card-footer\">\n        <small>Created: ${item.createdDate}</small>\n        <button class=\"btn-delete\" onclick=\"deleteDataItem(${item.id})\"></button>\n      </div>\n    `;\n    container.appendChild(card);\n  });\n}\n\n// View attached file from data card\nfunction viewAttachedFile(fileId) {\n  if (!window.uploadedFiles[fileId]) {\n    alert('File not found');\n    return;\n  }\n  \n  window.currentFileData = window.uploadedFiles[fileId];\n  viewFileContent();\n}\n\n// Open edit modal\nfunction openEditModal(id) {\n  const item = dataItems.find(d => d.id === id);\n  if (!item) return;\n  \n  window.currentEditItem = item;\n  document.getElementById('modalTitle').textContent = 'Update Data: ' + item.name;\n  document.getElementById('editName').value = item.name;\n  document.getElementById('editType').value = item.type;\n  document.getElementById('editSource').value = item.source;\n  document.getElementById('editStatus').value = item.status;\n  document.getElementById('editProgress').value = item.progress;\n  document.getElementById('editMember').value = item.member || '';\n  document.getElementById('editDescription').value = item.description || '';\n  document.getElementById('progressValue').textContent = item.progress + '%';\n  \n  document.getElementById('editModal').style.display = 'block';\n}\n\n// Open new data form\nfunction openNewDataForm() {\n  window.currentEditItem = null;\n  window.currentFileData = null;\n  document.getElementById('modalTitle').textContent = 'Add New Data';\n  document.getElementById('editForm').reset();\n  document.getElementById('progressValue').textContent = '0%';\n  removeFileUpload();\n  document.getElementById('editModal').style.display = 'block';\n}\n\n// Update progress value display\nfunction updateProgressDisplay(value) {\n  document.getElementById('progressValue').textContent = value + '%';\n}\n\n// Save data item\nfunction saveDataItem() {\n  const name = document.getElementById('editName').value.trim();\n  const type = document.getElementById('editType').value.trim();\n  const source = document.getElementById('editSource').value.trim();\n  const status = document.getElementById('editStatus').value;\n  const progress = parseInt(document.getElementById('editProgress').value);\n  const member = document.getElementById('editMember').value.trim();\n  const description = document.getElementById('editDescription').value.trim();\n  \n  if (!name || !type || !source || !member || !description) {\n    alert('Please fill in all required fields');\n    return;\n  }\n  \n  if (window.currentEditItem) {\n    // Update existing\n    window.currentEditItem.name = name;\n    window.currentEditItem.type = type;\n    window.currentEditItem.source = source;\n    window.currentEditItem.status = status;\n    window.currentEditItem.progress = progress;\n    window.currentEditItem.member = member;\n    window.currentEditItem.description = description;\n    \n    // Add file if uploaded\n    if (window.currentFileData) {\n      const fileId = 'file_' + window.currentEditItem.id + '_' + Date.now();\n      window.uploadedFiles[fileId] = window.currentFileData;\n      window.currentEditItem.file = fileId;\n    }\n    \n    showMessage('Data updated successfully!', 'success');\n  } else {\n    // Create new\n    const newId = Math.max(...dataItems.map(d => d.id), 0) + 1;\n    const today = new Date().toISOString().split('T')[0];\n    \n    let fileRef = null;\n    if (window.currentFileData) {\n      const fileId = 'file_' + newId + '_' + Date.now();\n      window.uploadedFiles[fileId] = window.currentFileData;\n      fileRef = fileId;\n    }\n    \n    dataItems.push({\n      id: newId,\n      name,\n      type,\n      source,\n      status,\n      progress,\n      member,\n      description,\n      createdDate: today,\n      file: fileRef\n    });\n    showMessage('Data added successfully!', 'success');\n  }\n  \n  saveDataItems();\n  closeModal();\n  renderDataList();\n}\n\n// Delete data item\nfunction deleteDataItem(id) {\n  if (confirm('Delete this data item permanently?')) {\n    dataItems = dataItems.filter(d => d.id !== id);\n    saveDataItems();\n    renderDataList();\n    showMessage('Data deleted!', 'success');\n  }\n}\n\n// Modal functions\nfunction closeModal() {\n  document.getElementById('editModal').style.display = 'none';\n  window.currentEditItem = null;\n  window.currentFileData = null;\n  removeFileUpload();\n}\n\nfunction showMessage(msg, type) {\n  const div = document.createElement('div');\n  div.className = `message ${type}`;\n  div.textContent = msg;\n  document.body.appendChild(div);\n  setTimeout(() => div.remove(), 3000);\n}\n\n// Close modal on outside click\nwindow.onclick = function(e) {\n  const modal = document.getElementById('editModal');\n  if (e.target === modal) closeModal();\n}\n\n// File Upload Handlers\nfunction setupFileUploadHandlers() {\n  const fileUploadArea = document.getElementById('fileUploadArea');\n  const fileInput = document.getElementById('fileUpload');\n  \n  if (!fileUploadArea || !fileInput) return;\n  \n  // Click to upload\n  fileUploadArea.addEventListener('click', () => fileInput.click());\n  \n  // Drag and drop\n  fileUploadArea.addEventListener('dragover', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    fileUploadArea.classList.add('drag-over');\n  });\n  \n  fileUploadArea.addEventListener('dragleave', () => {\n    fileUploadArea.classList.remove('drag-over');\n  });\n  \n  fileUploadArea.addEventListener('drop', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    fileUploadArea.classList.remove('drag-over');\n    \n    const files = e.dataTransfer.files;\n    if (files.length > 0) {\n      handleFileUpload(files[0]);\n    }\n  });\n  \n  // File input change\n  fileInput.addEventListener('change', (e) => {\n    if (e.target.files.length > 0) {\n      handleFileUpload(e.target.files[0]);\n    }\n  });\n}\n\nfunction handleFileUpload(file) {\n  const validTypes = ['text/csv', 'application/json', 'application/octet-stream', 'image/tiff'];\n  const validExtensions = ['.csv', '.json', '.geojson', '.gpkg', '.tif', '.tiff'];\n  \n  const fileExtension = '.' + file.name.split('.').pop().toLowerCase();\n  \n  if (!validExtensions.includes(fileExtension)) {\n    alert('Invalid file type. Please upload CSV, GeoJSON, Geopackage (GPKG), or TIFF files.');\n    return;\n  }\n  \n  const reader = new FileReader();\n  \n  reader.onload = (e) => {\n    try {\n      const isBinary = fileExtension === '.gpkg' || fileExtension === '.tif' || fileExtension === '.tiff';\n      const fileData = {\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        extension: fileExtension,\n        content: isBinary ? null : e.target.result,\n        uploadDate: new Date().toLocaleString(),\n        isBinary: isBinary,\n        file: file\n      };\n      \n      // Store file data\n      window.currentFileData = fileData;\n      \n      // Display preview\n      displayFilePreview(fileData);\n    } catch (error) {\n      alert('Error reading file: ' + error.message);\n    }\n  };\n  \n  reader.onerror = () => {\n    alert('Error reading file');\n  };\n  \n  // Read as text for text-based files, as binary for raster/database files\n  if (fileExtension === '.gpkg' || fileExtension === '.tif' || fileExtension === '.tiff') {\n    reader.readAsArrayBuffer(file);\n  } else {\n    reader.readAsText(file);\n  }\n}\n\nfunction displayFilePreview(fileData) {\n  const previewContainer = document.getElementById('filePreviewContainer');\n  const fileSize = fileData.size > 1048576 ? (fileData.size / 1048576).toFixed(2) + ' MB' : (fileData.size / 1024).toFixed(2) + ' KB'; // KB or MB\n  \n  let statsHtml = '';\n  if (fileData.extension === '.csv') {\n    const lines = fileData.content.split('\\n');\n    const rowCount = lines.filter(line => line.trim()).length - 1; // Subtract header\n    statsHtml = `\n      <div class=\"file-preview-stat\">\n        <strong>Rows:</strong>\n        <span>${rowCount}</span>\n      </div>\n      <div class=\"file-preview-stat\">\n        <strong>Size:</strong>\n        <span>${fileSize}</span>\n      </div>\n    `;\n  } else if (fileData.extension === '.json' || fileData.extension === '.geojson') {\n    const json = JSON.parse(fileData.content);\n    const itemCount = Array.isArray(json) ? json.length : (json.features ? json.features.length : 1);\n    statsHtml = `\n      <div class=\"file-preview-stat\">\n        <strong>Features:</strong>\n        <span>${itemCount}</span>\n      </div>\n      <div class=\"file-preview-stat\">\n        <strong>Size:</strong>\n        <span>${fileSize}</span>\n      </div>\n    `;\n  } else if (fileData.extension === '.gpkg') {\n    statsHtml = `\n      <div class=\"file-preview-stat\">\n        <strong>Type:</strong>\n        <span>Geopackage Database</span>\n      </div>\n      <div class=\"file-preview-stat\">\n        <strong>Size:</strong>\n        <span>${fileSize}</span>\n      </div>\n    `;\n  } else if (fileData.extension === '.tif' || fileData.extension === '.tiff') {\n    statsHtml = `\n      <div class=\"file-preview-stat\">\n        <strong>Type:</strong>\n        <span>Raster Image (GeoTIFF)</span>\n      </div>\n      <div class=\"file-preview-stat\">\n        <strong>Size:</strong>\n        <span>${fileSize}</span>\n      </div>\n    `;\n  }\n  \n  previewContainer.innerHTML = `\n    <div class=\"file-preview\">\n      <div class=\"file-preview-info\">\n        <div class=\"file-preview-name\">üìÑ ${escapeHtml(fileData.name)}</div>\n        <div class=\"file-preview-stats\">\n          ${statsHtml}\n        </div>\n      </div>\n      <div class=\"file-preview-actions\">\n        <button type=\"button\" class=\"btn-view-file\" onclick=\"viewFileContent()\">üëÅÔ∏è View</button>\n        <button type=\"button\" class=\"btn-remove-file\" onclick=\"removeFileUpload()\">üóëÔ∏è Remove</button>\n      </div>\n    </div>\n  `;\n  \n  previewContainer.style.display = 'block';\n}\n\nfunction viewFileContent() {\n  if (!window.currentFileData) return;\n  \n  const fileData = window.currentFileData;\n  \n  // Handle binary files\n  if (fileData.isBinary) {\n    if (fileData.extension === '.gpkg') {\n      alert('üóÇÔ∏è Geopackage Database\\n\\nFile: ' + fileData.name + '\\n\\nSize: ' + (fileData.size / 1024).toFixed(2) + ' KB\\n\\nNote: Geopackage files contain vector and/or raster data stored in a SQLite database. To view the contents, use specialized GIS software like QGIS, ArcGIS, or similar tools.');\n    } else if (fileData.extension === '.tif' || fileData.extension === '.tiff') {\n      alert('üñºÔ∏è GeoTIFF Raster Image\\n\\nFile: ' + fileData.name + '\\n\\nSize: ' + (fileData.size / 1024).toFixed(2) + ' KB\\n\\nNote: This is a geospatial raster image. To visualize it, use GIS software like QGIS, ArcGIS, GDAL, or web-based viewers that support GeoTIFF format.');\n    }\n    return;\n  }\n  \n  const overlay = document.createElement('div');\n  overlay.style.position = 'fixed';\n  overlay.style.top = '0';\n  overlay.style.left = '0';\n  overlay.style.width = '100%';\n  overlay.style.height = '100%';\n  overlay.style.background = 'rgba(0,0,0,0.6)';\n  overlay.style.zIndex = '2999';\n  overlay.style.display = 'flex';\n  overlay.style.alignItems = 'center';\n  overlay.style.justifyContent = 'center';\n  overlay.style.backdropFilter = 'blur(2px)';\n  overlay.id = 'fileViewerOverlay';\n  \n  let contentHtml = '';\n  \n  if (fileData.extension === '.csv') {\n    const lines = fileData.content.split('\\n');\n    const headers = lines[0].split(',').map(h => h.trim());\n    \n    contentHtml = `\n      <div class=\"file-viewer-modal\">\n        <button class=\"close-btn\" onclick=\"closeFileViewer()\">&times;</button>\n        <h3>üìÑ ${escapeHtml(fileData.name)}</h3>\n        <div class=\"file-table-container\">\n          <table>\n            <thead>\n              <tr>\n                ${headers.map(h => `<th>${escapeHtml(h)}</th>`).join('')}\n              </tr>\n            </thead>\n            <tbody>\n              ${lines.slice(1, 20).map(line => {\n                if (!line.trim()) return '';\n                const cells = line.split(',').map(c => c.trim());\n                return `<tr>${cells.map(c => `<td>${escapeHtml(c)}</td>`).join('')}</tr>`;\n              }).join('')}\n            </tbody>\n          </table>\n        </div>\n        ${lines.length > 21 ? `<p style=\"text-align: center; color: #999; margin-top: 15px;\">Showing first 19 rows of ${lines.length - 1} total rows</p>` : ''}\n      </div>\n    `;\n  } else if (fileData.extension === '.json' || fileData.extension === '.geojson') {\n    try {\n      const json = JSON.parse(fileData.content);\n      const prettyJson = JSON.stringify(json, null, 2).substring(0, 3000);\n      \n      contentHtml = `\n        <div class=\"file-viewer-modal\">\n          <button class=\"close-btn\" onclick=\"closeFileViewer()\">&times;</button>\n          <h3>üìã ${escapeHtml(fileData.name)}</h3>\n          <div class=\"json-viewer\">${escapeHtml(prettyJson)}</div>\n          ${JSON.stringify(json).length > 3000 ? '<p style=\"color: #999; margin-top: 10px;\">... (truncated)</p>' : ''}\n        </div>\n      `;\n    } catch {\n      contentHtml = `\n        <div class=\"file-viewer-modal\">\n          <button class=\"close-btn\" onclick=\"closeFileViewer()\">&times;</button>\n          <h3>üìã ${escapeHtml(fileData.name)}</h3>\n          <p>Error parsing JSON file</p>\n        </div>\n      `;\n    }\n  }\n  \n  overlay.innerHTML = contentHtml;\n  document.body.appendChild(overlay);\n  \n  // Close on overlay click\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) closeFileViewer();\n  });\n}\n\nfunction closeFileViewer() {\n  const overlay = document.getElementById('fileViewerOverlay');\n  if (overlay) overlay.remove();\n}\n\nfunction removeFileUpload() {\n  window.currentFileData = null;\n  document.getElementById('fileUpload').value = '';\n  document.getElementById('filePreviewContainer').style.display = 'none';\n  document.getElementById('filePreviewContainer').innerHTML = '';\n}\n\nfunction escapeHtml(text) {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n</script>\n\n<style>\n.data-container {\n  max-width: 1400px;\n  margin: 0 auto;\n  padding: 30px 20px;\n  background: linear-gradient(135deg, #f8f9fa 0%, #f0f4f8 100%);\n  min-height: 100vh;\n}\n\n.header-section {\n  margin-bottom: 40px;\n  background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);\n  color: white;\n  padding: 40px;\n  border-radius: 12px;\n  box-shadow: 0 8px 24px rgba(30, 60, 114, 0.15);\n}\n\n.header-section h1 {\n  color: white;\n  margin: 0 0 10px 0;\n  font-size: 2em;\n  font-weight: 700;\n  border: none;\n}\n\n.header-section p {\n  color: rgba(255,255,255,0.9);\n  margin: 5px 0 25px 0;\n  font-size: 1.05em;\n}\n\n.btn-add {\n  background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);\n  color: white;\n  padding: 14px 28px;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 700;\n  font-size: 1.05em;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.25);\n  display: inline-block;\n}\n\n.btn-add:hover {\n  background: linear-gradient(135deg, #45a049 0%, #3d8b40 100%);\n  transform: translateY(-3px);\n  box-shadow: 0 6px 18px rgba(76, 175, 80, 0.35);\n}\n\n.category-section {\n  margin-bottom: 50px;\n}\n\n.category-title {\n  color: white;\n  font-size: 1.5em;\n  margin: 0 0 25px 0;\n  padding: 20px 30px;\n  background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);\n  border-radius: 10px;\n  box-shadow: 0 6px 18px rgba(30, 60, 114, 0.2);\n  font-weight: 700;\n  letter-spacing: 0.5px;\n}\n\n.category-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(480px, 1fr));\n  gap: 25px;\n  margin-top: 20px;\n}\n\n.data-card {\n  background: white;\n  border: 2px solid #e0e0e0;\n  border-radius: 12px;\n  padding: 25px;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.08);\n  transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n}\n\n.data-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, #2a5298 0%, #4caf50 100%);\n}\n\n.data-card:hover {\n  box-shadow: 0 12px 28px rgba(0,0,0,0.15);\n  transform: translateY(-8px);\n  border-color: #2a5298;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 20px;\n  gap: 15px;\n  padding-bottom: 15px;\n  border-bottom: 2px solid #f0f0f0;\n}\n\n.card-title h3 {\n  margin: 0 0 8px 0;\n  color: #1e3c72;\n  font-size: 1.2em;\n  font-weight: 700;\n  line-height: 1.3;\n}\n\n.card-meta {\n  margin: 0;\n  color: #999;\n  font-size: 0.95em;\n  font-weight: 500;\n}\n\n.card-body {\n  margin-bottom: 20px;\n  padding: 16px;\n  background: #f9f9f9;\n  border-radius: 8px;\n  font-size: 0.95em;\n  line-height: 1.6;\n}\n\n.member-info,\n.description-info {\n  margin-bottom: 12px;\n}\n\n.member-info:last-child,\n.description-info:last-child {\n  margin-bottom: 0;\n}\n\n.member-info strong,\n.description-info strong {\n  color: #1e3c72;\n  font-weight: 700;\n  display: block;\n  margin-bottom: 4px;\n}\n\n.member-info span,\n.description-info span {\n  color: #555;\n  word-wrap: break-word;\n}\n\n.btn-edit {\n  background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);\n  color: white;\n  padding: 10px 18px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 700;\n  font-size: 0.95em;\n  white-space: nowrap;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 8px rgba(42, 82, 152, 0.2);\n}\n\n.btn-edit:hover {\n  background: linear-gradient(135deg, #1e3c72 0%, #142845 100%);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(42, 82, 152, 0.3);\n}\n\n.btn-edit:active {\n  transform: translateY(0);\n}\n\n.progress-section {\n  margin-bottom: 20px;\n  padding: 20px;\n  background: #f9f9f9;\n  border-radius: 8px;\n}\n\n.progress-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n  gap: 15px;\n}\n\n.status-label {\n  padding: 6px 16px;\n  border-radius: 20px;\n  color: white;\n  font-weight: 700;\n  font-size: 0.9em;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.15);\n}\n\n.progress-percent {\n  font-weight: 700;\n  color: #1e3c72;\n  font-size: 1.3em;\n  min-width: 50px;\n  text-align: right;\n}\n\n.progress-bar {\n  width: 100%;\n  height: 12px;\n  background: #e0e0e0;\n  border-radius: 6px;\n  overflow: hidden;\n  position: relative;\n}\n\n.progress-fill {\n  height: 100%;\n  transition: width 0.4s ease;\n  background: linear-gradient(90deg, #2a5298 0%, #4caf50 100%);\n  box-shadow: 0 0 8px rgba(42, 82, 152, 0.4);\n}\n\n.card-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 15px;\n  border-top: 2px solid #f0f0f0;\n  color: #999;\n  font-size: 0.9em;\n  font-weight: 500;\n}\n\n.btn-delete {\n  background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);\n  color: white;\n  padding: 8px 14px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 700;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 6px rgba(244, 67, 54, 0.2);\n}\n\n.btn-delete:hover {\n  background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);\n}\n\n/* Modal Styles */\n.modal {\n  display: none;\n  position: fixed;\n  z-index: 2000;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.6);\n  backdrop-filter: blur(2px);\n  animation: fadeIn 0.3s ease;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n.modal-content {\n  background-color: white;\n  margin: 5% auto;\n  padding: 40px;\n  width: 90%;\n  max-width: 650px;\n  border-radius: 14px;\n  box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n  animation: slideUp 0.3s ease;\n}\n\n@keyframes slideUp {\n  from {\n    transform: translateY(50px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n  border-bottom: 3px solid #2a5298;\n  padding-bottom: 20px;\n}\n\n.modal-header h2 {\n  margin: 0;\n  color: #1e3c72;\n  font-size: 1.4em;\n  font-weight: 700;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 32px;\n  font-weight: bold;\n  color: #999;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n}\n\n.close-btn:hover {\n  background: #f0f0f0;\n  color: #1e3c72;\n}\n\n.form-group {\n  margin-bottom: 24px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 10px;\n  font-weight: 700;\n  color: #1e3c72;\n  font-size: 0.95em;\n  text-transform: uppercase;\n  letter-spacing: 0.3px;\n}\n\n.form-group input,\n.form-group select {\n  width: 100%;\n  padding: 14px;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px;\n  font-size: 1em;\n  font-family: inherit;\n  transition: all 0.3s ease;\n}\n\n.form-group input:focus,\n.form-group select:focus {\n  outline: none;\n  border-color: #2a5298;\n  box-shadow: 0 0 12px rgba(42, 82, 152, 0.2);\n  background: #f8f9ff;\n}\n\n.form-group textarea {\n  width: 100%;\n  padding: 14px;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px;\n  font-size: 1em;\n  font-family: inherit;\n  transition: all 0.3s ease;\n}\n\n.form-group textarea:focus {\n  outline: none;\n  border-color: #2a5298;\n  box-shadow: 0 0 12px rgba(42, 82, 152, 0.2);\n  background: #f8f9ff;\n}\n\n.progress-input-group {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  margin-bottom: 24px;\n}\n\n.progress-input-group input[type=\"range\"] {\n  flex: 1;\n}\n\n#progressValue {\n  min-width: 70px;\n  font-size: 1.3em;\n  font-weight: 700;\n  color: #2a5298;\n  text-align: right;\n}\n\n.form-buttons {\n  display: flex;\n  gap: 15px;\n  justify-content: flex-end;\n  margin-top: 35px;\n  padding-top: 25px;\n  border-top: 2px solid #f0f0f0;\n}\n\n.btn-save {\n  background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);\n  color: white;\n  padding: 14px 32px;\n  border: none;\n  border-radius: 8px;\n  font-size: 1em;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);\n}\n\n.btn-save:hover {\n  box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);\n  transform: translateY(-2px);\n}\n\n.btn-save:active {\n  transform: translateY(0);\n}\n\n.btn-cancel {\n  background: #e8e8e8;\n  color: #333;\n  padding: 14px 32px;\n  border: none;\n  border-radius: 8px;\n  font-size: 1em;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);\n}\n\n.btn-cancel:hover {\n  background: #d8d8d8;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.12);\n  transform: translateY(-2px);\n}\n\n.btn-cancel:active {\n  transform: translateY(0);\n}\n\n.message {\n  position: fixed;\n  top: 25px;\n  right: 25px;\n  padding: 16px 24px;\n  background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);\n  color: white;\n  border-radius: 10px;\n  font-weight: 700;\n  font-size: 0.95em;\n  box-shadow: 0 6px 20px rgba(76, 175, 80, 0.35);\n  border-left: 4px solid #2e7d32;\n  animation: slideInRight 0.4s ease;\n  z-index: 2000;\n}\n\n.message.success {\n  background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);\n  color: white;\n}\n\n.message.error {\n  background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);\n  color: white;\n  border-left-color: #c62828;\n}\n\n@keyframes slideInRight {\n  from {\n    transform: translateX(400px);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n/* File Upload Styles */\n.file-upload-area {\n  border: 3px dashed #2a5298;\n  border-radius: 10px;\n  padding: 30px;\n  background: linear-gradient(135deg, #f8f9ff 0%, #f0f4f8 100%);\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n}\n\n.file-upload-area:hover {\n  border-color: #4caf50;\n  background: linear-gradient(135deg, #f0f8f5 0%, #e8f5f1 100%);\n  transform: scale(1.02);\n}\n\n.file-upload-area.drag-over {\n  border-color: #4caf50;\n  background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.2);\n}\n\n.file-upload-placeholder {\n  pointer-events: none;\n}\n\n.upload-icon {\n  font-size: 2.5em;\n  display: block;\n  margin-bottom: 10px;\n}\n\n.file-upload-placeholder p {\n  margin: 10px 0;\n  color: #2a5298;\n  font-weight: 600;\n  font-size: 1em;\n}\n\n.file-upload-placeholder small {\n  display: block;\n  color: #666;\n  font-size: 0.9em;\n  margin-top: 5px;\n}\n\n.file-preview {\n  background: white;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px;\n  padding: 15px;\n  margin-top: 10px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 15px;\n}\n\n.file-preview-info {\n  flex: 1;\n  text-align: left;\n}\n\n.file-preview-name {\n  font-weight: 700;\n  color: #1e3c72;\n  margin-bottom: 5px;\n  word-break: break-word;\n}\n\n.file-preview-stats {\n  font-size: 0.9em;\n  color: #666;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 10px;\n  margin-top: 8px;\n}\n\n.file-preview-stat {\n  display: flex;\n  justify-content: space-between;\n}\n\n.file-preview-stat strong {\n  color: #2a5298;\n  margin-right: 5px;\n}\n\n.file-preview-actions {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.btn-view-file {\n  background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);\n  color: white;\n  padding: 8px 14px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 0.9em;\n  white-space: nowrap;\n  transition: all 0.3s ease;\n}\n\n.btn-view-file:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(42, 82, 152, 0.3);\n}\n\n.btn-remove-file {\n  background: #f44336;\n  color: white;\n  padding: 8px 14px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 0.9em;\n  transition: all 0.3s ease;\n}\n\n.btn-remove-file:hover {\n  background: #d32f2f;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);\n}\n\n/* File Viewer Modal */\n.file-viewer-modal {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: white;\n  border-radius: 12px;\n  max-width: 90vw;\n  max-height: 80vh;\n  overflow: auto;\n  z-index: 3000;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  padding: 30px;\n}\n\n.file-viewer-modal h3 {\n  margin-top: 0;\n  color: #1e3c72;\n  border-bottom: 2px solid #f0f0f0;\n  padding-bottom: 15px;\n}\n\n.file-viewer-modal .close-btn {\n  position: absolute;\n  top: 15px;\n  right: 15px;\n}\n\n.file-table-container {\n  overflow-x: auto;\n  margin-top: 15px;\n}\n\n.file-table-container table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.95em;\n}\n\n.file-table-container th {\n  background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);\n  color: white;\n  padding: 12px;\n  text-align: left;\n  font-weight: 700;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n}\n\n.file-table-container td {\n  padding: 10px 12px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.file-table-container tr:hover {\n  background: #f9f9f9;\n}\n\n.json-viewer {\n  background: #f5f5f5;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  padding: 15px;\n  font-family: monospace;\n  font-size: 0.9em;\n  overflow-x: auto;\n  max-height: 500px;\n}\n\n.json-key {\n  color: #2a5298;\n  font-weight: 600;\n}\n\n.json-string {\n  color: #4caf50;\n}\n\n.json-number {\n  color: #f44336;\n}\n\n@media (max-width: 768px) {\n  .file-upload-area {\n    padding: 20px;\n  }\n  \n  .file-preview {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  \n  .file-preview-actions {\n    width: 100%;\n  }\n  \n  .btn-view-file,\n  .btn-remove-file {\n    flex: 1;\n  }\n  \n  .file-viewer-modal {\n    max-width: 95vw;\n    max-height: 85vh;\n    padding: 20px;\n  }\n}\n\n@media (max-width: 1024px) {\n  .data-container {\n    padding: 24px;\n  }\n  \n  .category-grid {\n    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));\n  }\n}\n\n@media (max-width: 768px) {\n  .data-container {\n    padding: 16px;\n  }\n  \n  .header-section {\n    padding: 24px 16px;\n  }\n  \n  .header-section h1 {\n    font-size: 1.6em;\n  }\n  \n  .category-grid {\n    grid-template-columns: 1fr;\n    gap: 16px;\n  }\n  \n  .data-card {\n    padding: 18px;\n  }\n  \n  .card-title h3 {\n    font-size: 1.1em;\n  }\n  \n  .form-buttons {\n    flex-direction: column;\n    gap: 12px;\n  }\n  \n  .btn-save,\n  .btn-cancel {\n    width: 100%;\n  }\n  \n  .modal-content {\n    padding: 24px 16px;\n    margin: 50px 20px;\n  }\n  \n  .message {\n    top: 15px;\n    right: 15px;\n    padding: 14px 16px;\n    font-size: 0.9em;\n  }\n}\n</style>\n\n<div class=\"data-container\">\n  <div class=\"header-section\">\n    <h1> Data Management</h1>\n    <p>Track and manage data collection progress for LMSP-Tanzania initiatives</p>\n    <button class=\"btn-add\" onclick=\"openNewDataForm()\"> Add New Data</button>\n  </div>\n  \n  <div id=\"mainContent\">\n    <div class=\"data-grid\" id=\"dataListContainer\"></div>\n  </div>\n</div>\n\n<div id=\"editModal\" class=\"modal\">\n  <div class=\"modal-content\">\n    <div class=\"modal-header\">\n      <h2 id=\"modalTitle\">Add New Data</h2>\n      <button class=\"close-btn\" onclick=\"closeModal()\">&times;</button>\n    </div>\n    \n    <form id=\"editForm\" onsubmit=\"event.preventDefault(); saveDataItem();\">\n      <div class=\"form-group\">\n        <label for=\"editName\">Data Name: <span style=\"color: red;\">*</span></label>\n        <input type=\"text\" id=\"editName\" required placeholder=\"e.g., Fisheries Production Records\">\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editType\">Data Type: <span style=\"color: red;\">*</span></label>\n        <select id=\"editType\" required>\n          <option value=\"\">Select Type</option>\n          <option value=\"Non-Spatial (CSV)\">Non-Spatial (CSV)</option>\n          <option value=\"Non-Spatial (Excel)\">Non-Spatial (Excel)</option>\n          <option value=\"Non-Spatial (JSON)\">Non-Spatial (JSON)</option>\n          <option value=\"Spatial (Shapefile)\">Spatial (Shapefile)</option>\n          <option value=\"Spatial (GeoJSON)\">Spatial (GeoJSON)</option>\n          <option value=\"Spatial (Raster)\">Spatial (Raster)</option>\n        </select>\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editSource\">Data Source: <span style=\"color: red;\">*</span></label>\n        <input type=\"text\" id=\"editSource\" required placeholder=\"e.g., Ministry of Fisheries\">\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editMember\">Member Added: <span style=\"color: red;\">*</span></label>\n        <input type=\"text\" id=\"editMember\" required placeholder=\"e.g., John Mwase\">\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editDescription\">Description: <span style=\"color: red;\">*</span></label>\n        <textarea id=\"editDescription\" required placeholder=\"e.g., Annual fisheries production data including species catch volumes...\" style=\"resize: vertical; min-height: 80px;\"></textarea>\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editCategory\">Category: <span style=\"color: red;\">*</span></label>\n        <select id=\"editCategory\" required>\n          <option value=\"\">Select Category</option>\n          <option value=\"Administrative/Physical\">Administrative/Physical</option>\n          <option value=\"Biological\">Biological</option>\n          <option value=\"Human Use\">Human Use</option>\n        </select>\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editStatus\">Status: <span style=\"color: red;\">*</span></label>\n        <select id=\"editStatus\" required>\n          <option value=\"not-started\">Not Started</option>\n          <option value=\"in-progress\">In Progress</option>\n          <option value=\"completed\">Completed</option>\n        </select>\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"editProgress\">Progress: <span style=\"color: red;\">*</span></label>\n        <div class=\"progress-input-group\">\n          <input type=\"range\" id=\"editProgress\" min=\"0\" max=\"100\" value=\"0\" \n                 onchange=\"updateProgressDisplay(this.value)\" \n                 oninput=\"updateProgressDisplay(this.value)\">\n          <span id=\"progressValue\">0%</span>\n        </div>\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"fileUpload\">Upload File (CSV, GeoJSON, GPKG, TIFF): <span style=\"color: red;\">*</span></label>\n        <div class=\"file-upload-area\" id=\"fileUploadArea\">\n          <input type=\"file\" id=\"fileUpload\" accept=\".csv,.json,.geojson,.gpkg,.tif,.tiff\" style=\"display: none;\">\n          <div class=\"file-upload-placeholder\">\n            <span class=\"upload-icon\">üìÅ</span>\n            <p>Drag & drop your file here or click to browse</p>\n            <small>Supported: CSV, GeoJSON, Geopackage (GPKG), TIFF</small>\n          </div>\n          <div id=\"filePreviewContainer\" style=\"display: none; margin-top: 15px;\"></div>\n        </div>\n      </div>\n      \n      <div class=\"form-buttons\">\n        <button type=\"button\" class=\"btn-cancel\" onclick=\"closeModal()\">Cancel</button>\n        <button type=\"submit\" class=\"btn-save\"> Save Data</button>\n      </div>\n    </form>\n  </div>\n</div>\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":true,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"toc-depth":2,"highlight-style":"atom-one","include-after-body":{"text":"<button class=\"scroll-to-top\" id=\"scrollToTopBtn\" onclick=\"scrollToTop()\">‚Üë</button>\n<script>\n  const scrollBtn = document.getElementById('scrollToTopBtn');\n  \n  // Show/hide scroll button based on scroll position\n  window.addEventListener('scroll', () => {\n    if (window.scrollY > 300) {\n      scrollBtn.classList.add('show');\n    } else {\n      scrollBtn.classList.remove('show');\n    }\n  });\n  \n  // Scroll to top smoothly\n  function scrollToTop() {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  }\n  \n  // Keyboard shortcut (Home key to go to top)\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Home') {\n      e.preventDefault();\n      scrollToTop();\n    }\n  });\n  \n  // Collapsible Sidebar Sections\n  document.addEventListener('DOMContentLoaded', function() {\n    setTimeout(function() {\n      const sidebar = document.querySelector('.sidebar');\n      if (!sidebar) return;\n      \n      const sectionHeaders = sidebar.querySelectorAll('strong');\n      \n      sectionHeaders.forEach((header, index) => {\n        if (index === 0) return; // Skip main title\n        \n        const headerText = header.textContent.trim();\n        const clickableHeader = document.createElement('div');\n        clickableHeader.className = 'sidebar-section-header';\n        clickableHeader.style.cursor = 'pointer';\n        clickableHeader.innerHTML = headerText + ' <span class=\"sidebar-toggle\">‚ñº</span>';\n        \n        const contentContainer = document.createElement('div');\n        contentContainer.className = 'sidebar-section-content collapsed';\n        \n        let element = header.nextElementSibling;\n        while (element && element.tagName !== 'STRONG') {\n          const next = element.nextElementSibling;\n          contentContainer.appendChild(element);\n          element = next;\n        }\n        \n        const sectionKey = 'sidebar-section-' + headerText.replace(/\\s+/g, '-').toLowerCase();\n        contentContainer.classList.add('collapsed');\n        clickableHeader.classList.add('collapsed');\n        \n        header.replaceWith(clickableHeader);\n        clickableHeader.parentNode.insertBefore(contentContainer, clickableHeader.nextSibling);\n        \n        clickableHeader.addEventListener('click', function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          contentContainer.classList.toggle('collapsed');\n          clickableHeader.classList.toggle('collapsed');\n          localStorage.setItem(sectionKey, contentContainer.classList.contains('collapsed'));\n        });\n      });\n    }, 500);\n  });\n"},"output-file":"data.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.39","theme":"cosmo","toc-location":"right","toc-title":"On this page","page-layout":"full"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}